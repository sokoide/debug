# README

## Debug006: Reading a memory dump

* make a binary by `make`
* set core limit
* run it by `./debug006`(crashes)
* read the memory dump

```sh
make
ulimit -c unlimited
ulimit -a # confirm 'core file size'
./debug006 #crash written in /var/crash

# retrieve base64 encoded crash dump as a binary in ./tmp/CoreDump
mkdir tmp
apport-unpack /var/crash/_var_scott_repo_sokoide_debug_debug006_debug006.1000.crash ./tmp

# read the dump
gdb ./gebug006 ./tmp/CoreDump
...
ing host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Core was generated by `./debug006'.
Program terminated with signal SIGABRT, Aborted.
#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50
50      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.
[Current thread is 1 (Thread 0x7f4c9c1dd700 (LWP 618432))]

(gdb) bt
#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50
#1  0x00007f4c9c203859 in __GI_abort () at abort.c:79
#2  0x00007f4c9c26e26e in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7f4c9c39808f "*** %s ***: terminated\n") at ../sysdeps/posix/libc_fatal.c:155
#3  0x00007f4c9c310aba in __GI___fortify_fail (msg=msg@entry=0x7f4c9c398077 "stack smashing detected") at fortify_fail.c:26
#4  0x00007f4c9c310a86 in __stack_chk_fail () at stack_chk_fail.c:24
#5  0x000055e02acfd2e1 in foo (i=24) at main.c:25
#6  0x000055e02acfd28d in threadEntry1 (dummy=0x0) at main.c:16
#7  0x00007f4c9c3db6da in start_thread (arg=<optimized out>) at pthread_create.c:474
#8  0x00007f4c9c300133 in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95
```

